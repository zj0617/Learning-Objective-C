## Objective-C综述

#### OC概述

面向对象的C语言

在C基础上增加了部分面向对象的语法；将C复杂繁琐的语法封装的更简单；完全兼容C语言：在OC中可以写任意C的代码；



#### OC历史

**布莱德.考克斯**：结合了C和Smalltalk的优势设计出了OC；

C优势：高级语言；移植性高(CPU运行迁移)。

Smalltalk优势：面向对象。

乔布斯创建NeXT公司(OS:Unix)，用OC编写NextStep功能强大的界面工具包；

NeXT公司获得OC的全部商业版权；

苹果公司收购NeXT，将NextStep更名为Cocoa，从此OC成为开发Mac平台的主力语言。



#### OC现状

OC只能开发运行在IOS平台的软件；



#### OC未来

前途堪忧。Swift语言发布且开源：快速、现代、安全、互动且全面优于OC；

未来Swift一定会取代OC



#### OC的特性

OC相对于C：

1、OC在C的基础上新增了一小部分面向对象的语法

2、将C的复杂、繁琐的语法封装的更为简单

3、OC完全兼容C语言

**具体**：

OC程序的源文件的后缀名是.m,代表message，代表OC中最重要的消息机制；C语言的源文件程序后缀名为.c

main函数仍是OC程序的入口和出口

main仍然有int类型返回值，代表程序的结束状态；

main函数的参数：仍然可以接收用户在运行程序时传递数据给程序，参数也可以不要。



#### **#import指令**

#import <>

以#开头，是一个预处理指令，在编译之前执行；

作用：是#include指令的增强版，包含文件，将文件的内容在预编译的时候拷贝到写指令的地方。

**增强**体现：同一个文件无论#import多少次，只会包含一次；#include写多次就会包含多次，即拷贝多次；若想只包含一次就需要条件编译指令#ifndef #define ... #endif;

简要原理：#import指令在包含文件的时候，其底层会判断后续文件是否已经被包含过，如果被包含就会略过，否则才会包含；



#### **框架**

1、是一个功能集  苹果或者第三方事先将一些在开发程序的时候经常要用到的功能写好，把这些功能封装在一个一个的类或者函数中，这些函数和类的集合就叫做框架；有点像C的函数库

**2、Foudation框架**

- Foundation:基础、基本；提供了最基础的功能：输入、输出、常用的类、还有一些数据类型；
- 要使用Foudation中的功能，就要**#import<Foudation/Foudation.h>**意思就是包含Foudation框架中的Foudation.h这个文件；
- Foudation.h中包含了Foudation框架中的其他所有头文件，所以要使用Foudation框架就只需要包含Foudation.h即可，就相当于包含了Foudation框架中的所有头文件，那么Foudation框架中所有的函数和类就可以直接使用了。



#### **自动释放池@autoreleasepool**

可将代码写在自动释放池中，或者把自动释放池删掉，目前不会有任何影响。



#### **NSLog函数**

1、定义在Foudation框架中的；

2、作用：是printf函数的增强版，向控制台输出信息

3、语法： NSLog(@"格式控制字符串",变量列表)；最简单的：NSLog(@"要输出的信息")

4、增强：

- 会输出一些调试相关信息：执行这句代码的时间（测试性能需要）、程序的名称（在控制台可以有多个Target一起执行）、进程号（一个正在执行的程序—进程）、线程编号
- 会自动换行
- OC中新增了一些数据类型。NSLog不仅可以输出C数据类型变量的值还可以输出OC新增的数据类型的变量的值

5、用法和printf函数用法差不多，注意NSLog中有个@符号，一样可以输出变量的值，且占位符和用法一样；

```objc
#import <Foudation/Foudation.h>
int main()
{
    NSLog(@"Hello,World!")
    Float f=12.12f;
    NSLog(@"f = %f",f);
}
```

6、使用注意：

- NSLog函数的第一个参数前面必须加一个@符号
- 如果手动在输出信息**末尾**加了'\n'换行，那么函数的自动换行功能就会失效，如果加在中间不会失效



#### NSString

OC设计了一个更为好用的用来存储字符串的一个类型NSString。

NSString类型的 指针变量 专门(只能)用来存储**OC字符串**的地址。

**C字符串vsOC字符串**

OC字符串常量必须要使用一个前缀@符号。

”jack“ 与@”jack“

```objective-c
NSString * str = @"jack";
NSLog(str);
NSLog(@"Hello,I am %@",str);
```

- 在OC中专门设计了NSString类型来存储字符串
- 字符串分为C字符串和OC字符串：字符串如果没有@前缀，那么这个字符串常量就是一个C字符串；反之为OC字符串。针对字符串常量而言！！！所以OC字符串常量的前面要加一个@前缀
- NSString类型的指针变量只能存储OC字符串；
- 注意：
  - **NSLog函数的第一个参数是一个OC字符串**，所以NSLog函数的第一个实参应该以@符号开头；
  - 如果要使用NSLog函数来输出OC字符串的值，使用占位符%@；



#### NS前缀

NextStep  ——> Cocoa  ——> Foudation框架之中。



#### @符号

1、将C字符串转换成OC字符串：”jack"  ——>  @“jack"

2、OC中绝大部分的关键字都是以@符号开头



#### 注释

OC中的注释与C的注释一模一样，分为单行和多行注释//，/**/；



#### 函数的定义与调用

与C的函数定义与调用是一样的。



#### OC程序与C的对比

1、OC程序的编译、链接、执行。

- 在.m文件中写上符合OC语法的源代码
- 使用编译器将.m源代码编译为目标文件  cc -c xxx.m
  - 预处理、检查语法、编译
- 链接  cc xx.o -framework 框架名称
  - 如果程序中使用了框架中的函数或者类，那么在链接过程中，就必须要告诉编译器去哪个框架中找那个函数或者类
  - 程序中用到了哪一个框架中的功能，就要在链接时告诉编译器
- 链接成功后生成.out可执行文件，再执行 ./ xxx.o

2、OC程序与C程序各个阶段的后缀名对比

|      | 源文件 | 目标文件 | 可执行文件 |
| ---- | ------ | -------- | ---------- |
| C    | .c     | .o       | .out       |
| OC   | .m     | .o       | .out       |

​    

#### OC的数据类型

1、OC支持C语言中的所有数据类型。

- 基本数据类型：int、double、float
- 构造类型：数组、结构体、枚举
- 指针类型：int * p1
- 空类型：void
- typedef自定义类型

2、新增了一些数据类型：

- 布尔类型BOOL（绝大数情况下用这个）：
  - 存储**YES、NO**中的任意一个数据；
  - 一般用来存储**条件表达式的结果**；
  - BOOL：typedef signed char BOOL 实际上BOOL类型的变量是一个有符号的char类型变量；
- Boolean：
  - 可以存储**true或者false**
  - 一般用来存储**条件表达式的结果**；
  - Boolean：typedef unsigned char Boolean 实际上Boolean类型的变量是一个无符号的char类型变量；
- class类型 类
- id类型 万能指针
- nil类型 与NULL差不多
- SEL 方法选择器
- block 代码段



#### OC的运算符

支持C的所有运算符：

- 赋值运算符 =
- 算术运算符 + - * / %
- 复合赋值运算符 += -= *= /= %=
- 自增与自减 ++ --
- 关系运算符 > >= < <= == !=
- 逻辑运算符 && || ！
- 取地址运算符 &
- 指针访问运算符 *
- 位运算符 & | ^ ~
- ……



#### OC的控制语句

支持C所有控制语句：

- IF结构
- switch-case结构
- while
- do-while
- for
- 数组
- 指针
- 函数
- ……



#### OC的关键字

支持C中全部的关键字，并且效果一致；

OC也新增了一些关键字，绝大多数以@符号开头：@interface、@implementation、@public























